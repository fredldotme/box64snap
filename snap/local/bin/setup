#!/bin/bash

MAGIC=":x86_64:M::\x7fELF\x02\x01\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x02\x00\x3e\x00:\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xfe\xff\xff\xff:/snap/bin/box64-with-gl4es.box64:"
MAGIC_FILE="/etc/binfmt.d/box64snap.conf"

if [ -f "$MAGIC_FILE" ]; then
    echo "Setup already done successfully"
    exit 0
fi

echo "Please run following command to enable box64-with-gles to act as a system-wide x86_64 interpreter:"
echo ""
echo "echo \"$MAGIC\" | sudo tee \"$MAGIC_FILE\""
echo "sudo systemctl restart systemd-binfmt.service"
echo ""

exit 0
